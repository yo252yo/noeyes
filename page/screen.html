<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Screen</title>
    <link rel="stylesheet" href="../style.css">
    <script src="../resource/common.js"></script>
    <script src="../resource/os.js"></script>
    <script>
        // Update value display every 300ms
        setInterval(() => {
            const valueElement = document.getElementById('value-text');
            if (valueElement || getDay() > 2) {
                const currentValue = getValue();
                if (currentValue) {
                    valueElement.textContent = `Value: ${currentValue}`;
                }
            }

            const attElement = document.getElementById('att-text');
            if (attElement) {
                const currentAtt = getAtt();
                if (currentAtt > 0 || getDay() > 3) {
                    attElement.textContent = `Att: ${currentAtt}`;
                    attElement.style.display = 'block';
                    if (currentAtt < 20) {
                        attElement.style.color = 'red';
                    } else if (currentAtt <= 80) {
                        attElement.style.color = 'yellow';
                    } else {
                        attElement.style.color = 'blue';
                    }
                } else {
                    attElement.style.display = 'none';
                }
            }
        }, 200);
    </script>
</head>

<body style="background-color: #008080; margin: 0; padding: 0; height: 100vh; overflow:hidden;">
    <div id="diary-icon" class="desktop-icon" style="left:25px;">
        <img src="../resource/diary_icon.png" alt="Diary Icon">
        <span>diary.txt</span>
    </div>
    <div id="diary-window" class="window" style="display: none;">
        <div class="window-title-bar">
            <span class="window-title">diary.txt</span>
            <button class="window-close-btn" onclick="closeDiaryWindow()">×</button>
        </div>
        <div class="window-content">
            <iframe src="diary.html"></iframe>
        </div>
    </div>
    <div id="class-icon" class="desktop-icon" style="left:75px;">
        <img src="../resource/class_icon.png" alt="Class Icon">
        <span>class.exe</span>
    </div>
    <div id="class-window" class="window" style="display: none; left:75px; top: 25px;">
        <div class="window-title-bar">
            <span class="window-title">class.exe</span>
            <button class="window-close-btn" onclick="closeClassWindow()">×</button>
        </div>
        <div class="window-content">
            <iframe src="class.html"></iframe>
        </div>
    </div>
    <div id="farm-icon" class="desktop-icon" style="left:140px;">
        <img src="../resource/farm_icon.png" alt="Farm Icon">
        <span>farm.exe</span>
    </div>
    <div id="farm-window" class="window" style="display: none; left:150px; top: 25px;">
        <div class="window-title-bar">
            <span class="window-title">farm.exe</span>
            <button class="window-close-btn" onclick="closeFarmWindow()">×</button>
        </div>
        <div class="window-content">
            <iframe src="farm.html"></iframe>
        </div>
    </div>
    <button id="start-button" onclick="callItADay()"><img src="../resource/start_icon.png" alt="Start Icon"> call it a
        day</button>
    <div id="day-display"
        style="position: fixed; bottom: 0px; right: 0px; display: flex; flex-direction: row; align-items: center; gap: 2px; font-weight: bold; padding: 4px 8px; font-family: 'MS Sans Serif', Tahoma, sans-serif; color: #000; background: #c0c0c0; border-top: 2px solid #ffffff; border-left: 2px solid #ffffff; border-right: 2px solid #404040; border-bottom: 2px solid #404040; box-sizing: border-box;">

        <div style="margin-right: 10px;">
            <div id="value-text" style="font-size: 12px;"></div>
            <div id="att-text" style="font-size: 12px; display: none;"></div>
        </div>
        <div style="padding-left: 10px; border-left: 2px solid #404040;">
            <div id="day-text" style="font-size: 12px;">Day 1/7</div>
            <div id="time-text" style="font-size: 10px;">00:00:00</div>
        </div>
    </div>
</body>

</html>