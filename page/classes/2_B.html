<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Streaming Era</title>
    <link rel="stylesheet" href="../../resource/css/style.css">
    <link rel="stylesheet" href="../../resource/css/class.css">
    <script src="../../resource/js/pixi.min.js"></script>
    <script type="module">
        import { start } from '../../resource/engine/engine.js';
        import { TARGET_TYPES } from '../../resource/engine/config.js';
        import { getValue, getDay } from '../../resource/js/common.js';

        // Start the game with basic targets (4 if day 2, 2 otherwise)
        const tutorialTargets = getDay() === 2 ? 4 : 2;
        start(TARGET_TYPES.BASIC, tutorialTargets);

        // Score tracking and next button logic
        const WIN_SCORE = 50;
        const scoreDisplay = document.getElementById('score-display');
        const nextButton = document.getElementById('next-button');

        // Function to update score display
        function updateScoreDisplay() {
            const currentScore = getValue();
            scoreDisplay.textContent = `${currentScore}/${WIN_SCORE}`;

            // Show next button when win condition is met
            if (currentScore >= WIN_SCORE && nextButton.style.display === 'none') {
                nextButton.style.display = 'block';
            }
        }

        // Update score display every 300ms
        setInterval(updateScoreDisplay, 300);
    </script>
</head>

<body
    style="margin: 0; padding: 0; -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; overflow: hidden;">
    <div style="overflow-y: auto; height: 100vh; padding: 20px; width: 100vw; box-sizing: border-box;">
        <h1 class="welcome-text">Making Value with Influencers</h1>

        <p><span class="highlight-text">Influencers</span> can create huge amount of <span
                class="highlight-text">Value</span> thanks to <span class="highlight-text">Collabs</span>.
        </p>

        <p><span class="highlight-text">Collabs</span> is what happens when two <span
                class="highlight-text">Influencers</span> get together.
        </p>

        <div class="info-panel">
            <p>Click on a <span class="highlight-text">Influencer</span> when it gets close to another to make them
                <span class="highlight-text">Collab</span>.
            </p>
        </div>
        <div class="info-panel">
            <p>Gather 50 <span class="highlight-text">Value</span> to validate this class. (<span
                    id="score-display">0/50</span>)</p>
            <p>Can you capture the right moment?</p>
        </div>

        <div style="text-align: center; display:none;" id="next-button">
            <a href="2_3.html" class="next-button">
                <img src="../../resource/icons/next.png" alt="Continue" />
                NEXT
            </a>
        </div>
    </div>
</body>

</html>