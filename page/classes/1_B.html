<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My First Class</title>
    <link rel="stylesheet" href="../../resource/css/style.css">
    <link rel="stylesheet" href="../../resource/css/class.css">
    <script src="../../resource/js/pixi.min.js"></script>
    <script type="module">
        import { start } from '../../resource/engine/engine.js';
        import { TARGET_TYPES } from '../../resource/engine/config.js';
        import { getValue } from '../../resource/js/common.js';

        // Start the game with 5 emoji targets
        start(TARGET_TYPES.EMOJI, 5);

        // Score tracking and next button logic
        const WIN_SCORE = 5;
        const scoreDisplay = document.getElementById('score-display');
        const nextButton = document.getElementById('next-button');

        // Function to update score display
        function updateScoreDisplay() {
            const currentScore = getValue();
            scoreDisplay.textContent = `${currentScore}/${WIN_SCORE}`;

            // Show next button when win condition is met
            if (currentScore >= WIN_SCORE && nextButton.style.display === 'none') {
                nextButton.style.display = 'block';
            }
        }

        // Update score display every 100ms
        setInterval(updateScoreDisplay, 100);
    </script>
</head>

<body
    style="margin: 0; padding: 0; -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; overflow: hidden;">
    <div style="overflow-y: auto; height: 100vh; padding: 20px; width: 100vw; box-sizing: border-box;">
        <h1 class="welcome-text">The world before the fall</h1>

        <p>During these dark times, people were all isolated and could only produce <span
                class="highlight-text">Value</span> by themselves!</p>

        <div class="info-panel">
            <p>In this advanced simulation, you can produce 1 Value by touching the floating heads.</p>
            <p>Catch 5 of them to validate this class. (<span id="score-display">0/5</span>)</p>
            <p>Can you do it?</p>
        </div>

        <div style="text-align: center; display:none;" id="next-button">
            <a href="1_3.html" class="next-button">
                <img src="../../resource/icons/next.png" alt="Continue" />
                NEXT
            </a>
        </div>
    </div>
</body>

</html>