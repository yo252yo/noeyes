<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Class</title>
    <link rel="stylesheet" href="../style.css">
    <link rel="stylesheet" href="../resource/class.css">
    <script src="../resource/common.js"></script>
</head>

<body style="margin: 0; padding: 5px 20px 20px 20px;">
    <h1>Welcome Larva!</h1>
    <div id="tip-content"></div>
    <div id="class-content"></div>

    <script>
        // Tips dictionary - each day maps to a tip message
        const tips = {
            "1": "It's time for your first class!<br />Exciting, isn't it?<br />Click on the link right below to get you started!",
            "4": "How is it going?<br />Now that you know the two genders, you'll be an expert on the Economy in no time!"
        };

        // Class entries dictionary - each day maps to HTML snippets for class items
        const classEntries = {
            "1": `<li>
                <a href="classes/1_1.html">
                    <img src="../resource/book_icon.png" style="width:20px; height:20px; margin-right:5px">My First Class
                </a>
            </li>`,
            "2": `<li>
                <a href="classes/2_1.html">
                    <img src="../resource/book_icon.png" style="width:20px; height:20px; margin-right:5px">The Influencers
                </a>
            </li>`,
            "3": `<li>
                <a href="classes/3_1.html">
                    <img src="../resource/book_icon.png" style="width:20px; height:20px; margin-right:5px">Chat
                </a>
            </li>`,
            "4": `<li>
                <a href="classes/4_1.html">
                    <img src="../resource/book_icon.png" style="width:20px; height:20px; margin-right:5px">Managing the Economy
                </a>
            </li>`,
            "5": `<li>
                <a href="class.html">
                    <img src="../resource/book_icon.png" style="width:20px; height:20px; margin-right:5px">..PHD.. Building Your Online Presence
                </a>
            </li>`,
            "6": `<li>
                <a href="class.html">
                    <img src="../resource/book_icon.png" style="width:20px; height:20px; margin-right:5px">..PHD.. Community Management
                </a>
            </li>`,
            "7": `<li>
                <a href="class.html">
                    <img src="../resource/book_icon.png" style="width:20px; height:20px; margin-right:5px">..PHD.. Monetization Strategies
                </a>
            </li>`,
            "8": `<li>
                <a href="class.html">
                    <img src="../resource/book_icon.png" style="width:20px; height:20px; margin-right:5px">..PHD.. Crisis Communication
                </a>
            </li>`,
            "9": `<li>
                <a href="class.html">
                    <img src="../resource/book_icon.png" style="width:20px; height:20px; margin-right:5px">..PHD.. Final Project Preparation
                </a>
            </li>`,
            "10": `<li>
                <a href="class.html">
                    <img src="../resource/book_icon.png" style="width:20px; height:20px; margin-right:5px">..PHD.. Class Selection Ceremony
                </a>
            </li>`
        };

        function generateClassContent() {
            const currentDay = getDay();
            const maxDay = getMaxAllowedDay();
            const contentDiv = document.getElementById('class-content');

            // Get all entries before or equal to current day
            const availableEntries = [];
            for (let day = 1; day <= currentDay; day++) {
                if (classEntries[day.toString()]) {
                    availableEntries.push({
                        day: day,
                        html: classEntries[day.toString()]
                    });
                }
            }

            // Display entries in reverse chronological order (newest first)
            availableEntries.reverse();

            let html = '<ul>';
            availableEntries.forEach(entry => {
                let linkHtml = entry.html;
                if (entry.day != maxDay) {
                    linkHtml = linkHtml.replace('<a ', '<a class="old_link" ');
                }
                html += `<li>${linkHtml.replace('<li>', '').replace('</li>', '')}</li>`;
            });
            html += '</ul>';

            contentDiv.innerHTML = html;

            // Generate tip content
            const tipDiv = document.getElementById('tip-content');
            const currentTip = tips[currentDay.toString()];
            if (currentTip) {
                tipDiv.innerHTML = `<div class="help-bubble">${currentTip}</div>`;
            } else {
                tipDiv.innerHTML = '';
            }
        }

        // Generate class content when page loads
        generateClassContent();

        // Regenerate class content every 2 seconds to show day changes dynamically
        setInterval(generateClassContent, 2000);
    </script>
</body>

</html>