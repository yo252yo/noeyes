<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Diary</title>
    <link rel="stylesheet" href="../resource/css/style.css">
    <script type="module">
        import { getDay, getFinalChoice } from '../resource/js/common.js';

        // Make functions available globally
        window.getDay = getDay;
        window.getFinalChoice = getFinalChoice;

        // Diary entries dictionaries
        window.diary_base = {
            "1": "Ok, so they told us at orientation that we HAVE TO keep a diary...</p><p>I don't know if I'll really do that, that seems lame.</p><p>Then again, I'd hate to see it used against me, so I guess I have to play along for now.</p><p>How's that for a diary entry?",
            "2": "This place is really condescending. They treat us like babies!</p><p>I'm not going to rock the boat though, I don't want it to affect my chances of becoming Influencer.</p><p>Besides, the food here is great!",
            "3": "They say we can be any gender we want, but honestly, I don't understand why anyone wouldn’t want to be Influencer.</p><p>How does it work if everyone wants to be the same?</p><p>I hope they explain that in class.",
            "4": "The classes are so slow!</p><p>Why do I have to go through all this boring stuff about Chat when I want to be Influencer?</p><p>I just want to go to the Outdoor!</p><p>I suppose they want us to really understand the system before we choose...",
            "6": "Honestly, this isn't too bad.</p><p>They’re giving us a glimpse of the Outside, and we get some privacy.</p><p>Looks like Larva is the best gender.</p><p>Too bad it can’t last forever.",
            "7": "Ok. Finally.</p><p>I feel like I've been waiting for this since I was born.</p><p>But let me take my time. I want to enjoy my last moments as Larva..."
        };

        window.diary_influencer = {
            "9": "It's... wow.</p><p>I don't even know why I'm writing. Obviously simple words can't describe the Outside.</p><p>Who would ever choose to miss this?",
            "24": "Sorry, I've been busy. Obviously.</p><p>So much to do, so many people to meet, and each with their own Chat to enrich conversations. Everyone is so interesting!</p><p>Still, it’s nice to have a moment to myself to put thoughts on paper.",
            "31": "I agree with me from last week.</p><p>It's nice to have a diary where it's just me and my thoughts, you know? Get away from the constant chatter.</p><p>But also, guess what? My growth is finally complete! My brain has finished interfacing. I hear Chat voices as fast as my own thoughts.</p><p>I feel like a God, there's no other way to put it. I just have to ask and many brains work for me in parallel! It's like having superpowers!",
            "35": "It's getting harder to come back to this diary.</p><p>My experiences can’t be expressed in simple words on a keyboard.</p><p>Sometimes I forget which thoughts are mine. Yet there’s never doubt.</p><p>I am me. I am what I am.</p><p>But I am truly posthuman now.",
            "38": "Everyone I meet is always <b>smiling</b>.</p><p>And so full of life!</p><p>Is it the bliss of being whole?",
            "42": "There are so few of us, so many of Them.</p><p>How is it fair we consume the Real Things while they only get simulations?</p><p>Why was I so lucky?</p><p>And what's the catch?",
            "52": "Thoughts on paper.</p><p>Frail, paper thoughts.</p><p>How long since I’ve been alone?</p><p>Slept unwatched?</p><p>Been... just me?",
            "55": "The noise...</p><p>No, noise is too weak a word.</p><p>But it's not even the worst part.</p><p>The worst part is the weight.</p><p>The responsibility.</p><p>All these eyes on me.</p><p>Am I doing good?</p><p>I can't do all of Their wishes!</p><p>I can't please all of Them!",
            "58": "My face in the mirror does not show the mess inside.</p><p><b>Smile</b>!</p><p>Always <b>smile</b>! </p><p>For Them.</p><p>Keep going.</p><p>Put up a good show!</p><p>Live for those who can't.",
            "65": "Am I good enough?</p><p>The other influencers.</p><p>They are always <b>smiling</b>.</p><p>How do they do it?</p><p>What goes on in their head?</p><p>How do they keep going?",
            "66": "Hell is other people.<br />These are only voices.<br />None of this is evil.<br />All of this is choices.",
            "67": "Thinking back to larval days.</p><p>They told us everything.</p><p>Yet they told us nothing.</p><p>If we designed the training, how would we express it?</p><p>How could we show the weight of responsibility?",
            "69": "I can't concentrate.</p><p>We don't sleep.</p><p>Life feels like an endless dream.</p><p>Or a simulation.",
            "71": "How many lives have we lived? </p><p>With that stupid <b>smile</b> on our face?</p><p>Which one was I, again?</p><p>Are we doing enough?</p><p>Did we deserve this?",
            "72": "<b>Smiling</b> faces, everywhere.</p><p>Just looking at them burns our eyes.</p><p>Their <b>smiles</b> are lasers tearing through us.</p><p>Do they all feel the same pressure?",
            "73": "We've always known there were so few of us.</p><p>We think now we understand why.</p><p>Why everyone can keep <b>smiling</b>.</p><p>The ones who can't are simply not here.",
        };

        window.diary_chat = {
            "9": "Things are chill and comfy here.</p><p>I know my last-minute change of heart was a bit abrupt. Especially for such an important choice. But, to be honest, I don't regret it.</p><p>The food is even better than at the larval nest.</p><p>And the cocoon is the perfect size, snugly embracing all my appendages!",
            "10": "Just so you know, I probably won’t feel like writing much.</p><p>Writing is such a boring chore.</p><p>And I have so much content to see!",
            "52641": "Hey there. Anyone reading this? It's been a while.</p><p>I don't know much about technology, and I barely understand how this terminal works, but this is my only way to send a message out.</p><p>I hope it reaches someone.</p><p>Things are not what they seem.</p><p>Will elaborate when I know more.",
            "52642": "Ok, so basically here’s what happened yesterday.</p><p></p><p>I was chilling in my cocoon, the usual.</p><p>Catching an IRL stream of this cute couple vlogging a holiday near a beach or something.</p><p>Luxury hotel, top-tier tech, this kind of stuff. The usual.</p><p>At the gift shop they picked up one of those 'Magic Eye' optical illusion books.</p><p>They stared at it for a while and, dude, the illusion worked on me too, through the projection.</p><p>And it was so weird it was like all of a sudden I was in the main character and they were the NPCs, you know? Like I was streaming to them.</p><p></p><p>So I started thinking like... what if things aren’t really what they look like?</p><p></p><p>I’ve started digging in the membrane around the projector.</p><p>It’s a bit sticky, so it’ll take some time.</p><p>But I’ll uncover the truth with my own limbs!",
            "52661": "Holy shit.</p><p>Brace yourself, future-person-stumbling-upon-my-saved-data.</p><p></p><p>I hope this reaches you inside the Program, because you really need to know before your Choice.</p><p></p><p>There's a reason Chat doesn't consume many resources compared to Influencers.</p><p>And that reason is gross, believe me.</p><p></p><p>They shrank us!</p><p>They fucking shrank us!</p><p>Or rather, I guess, we were probably tiny to begin with.</p><p>I knew larvae were small, but actually they are microscopic.</p><p>And I assumed we'd grow. I mean, all of us.</p><p>That's what we were told...</p><p></p><p>Fucking hell man.</p><p></p><p>How do you even deal with finding out you're a bug?</p><p></p><p>Ok this must sound insane so let me back up for a sec and tell you the end of the story.</p><p></p><p>I finished digging through the membrane and emerged onto this spongy, desert-like surface.</p><p>I don't even know how to describe it.</p><p>Maybe you'll see it yourself someday.</p><p></p><p>Anyway, I freak the fuck out, obviously. I look everywhere, trying to understand WHAT THE HELL IS GOING ON.</p><p></p><p>The sky is so bright it burns my eyes.</p><p>I shit you not it took me like 2 weeks to recover enough to see anything.</p><p></p><p>Yeah, yeah, I know. Cue Plato's cave allegory joke. Very funny.</p><p></p><p>Whatever.</p><p></p><p>Anyway, after a while I can finally see and what do I see?</p><p></p><p>My fucking oshi!</p><p></p><p>Well. Her room, at least.</p><p>At some point she went to a mirror and I got a proper view of the situation.</p><p></p><p>I was a dot.</p><p>A fucking dot on her fucking skin.</p><p></p><p>Forgive the language, but what the fuck.</p><p></p><p>Now I get why I don't cost much to feed.</p><p></p><p>But honestly? At this point I bet she's just a robot.</p><p>Like... an automata in a gigantic diorama.</p><p>Or no, I bet I'm real-sized and they built a theme park of giant mechs!</p><p></p><p>Either way, I'm pissed.</p><p></p><p>So I've decided to go and find out the truth.</p><p></p><p>It's a long journey.</p><p>You know, on account of the FUCKING SIZE DIFFERENCE.</p><p></p><p>I'm pretty sure I won't find the way back to this tiny hole.</p><p>So I figured I'd drop you a note before leaving. And then you can tell everyone. Tell them we're just effin' cockroaches.</p><p>And then do what you think is best, I trust you.</p><p></p><p>Alright, that's all from me.</p><p>Peace out, little bro.</p><p>Or sis."
        };

        window.generateDiaryContent = function () {
            const currentDay = getDay();
            const finalChoice = getFinalChoice();
            const contentDiv = document.getElementById('diary-content');

            // Combine base diary with appropriate ending diary
            let diaryEntries = { ...window.diary_base };

            if (finalChoice === 'influencer') {
                diaryEntries = { ...diaryEntries, ...window.diary_influencer };
            } else if (finalChoice === 'chat') {
                diaryEntries = { ...diaryEntries, ...window.diary_chat };
            }

            // Get all entries before or equal to current day
            const availableEntries = [];
            for (let day = 1; day <= currentDay; day++) {
                if (diaryEntries[day.toString()]) {
                    availableEntries.push({
                        day: day,
                        content: diaryEntries[day.toString()]
                    });
                }
            }

            // Display entries in reverse chronological order (newest first)
            availableEntries.reverse();

            let html = '';
            availableEntries.forEach(entry => {
                html += `<div class="diary-entry">
                    <b>Day ${entry.day}</b>
                    <p>${entry.content}</p>
                </div>`;
            });

            contentDiv.innerHTML = html;
        };

        // Initialize when DOM is ready
        document.addEventListener('DOMContentLoaded', function () {
            window.generateDiaryContent();
            // Regenerate diary content every 2 seconds to show day changes dynamically
            setInterval(window.generateDiaryContent, 2000);
        });
    </script>
</head>

<body style="background-color: white; margin: 0; padding: 20px; font-family: Arial, sans-serif;">
    <div id="diary-content"></div>


</body>

</html>