<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Diary</title>
    <link rel="stylesheet" href="../resource/css/style.css">
    <script type="module">
        import { getDay, getFinalChoice } from '../resource/common.js';

        // Make functions available globally
        window.getDay = getDay;
        window.getFinalChoice = getFinalChoice;

        // Diary entries dictionaries
        window.diary_base = {
            "1": "Ok so they told us at orientation that we HAVE TO keep a diary...</p><p>I don't know if I'll really do that, that seems lame.</p><p>Then again, I'd hate to see it used against me, so I guess I have to play along for now.</p><p>How's that for a diary entry?",
            "2": "This place is really condescending, they treat us like babies!</p><p>I'm not gonna rock the boat though, I don't want it to affect my chances of becoming Influencer.</p><p>Besides, the food here is great!",
            "3": "They say we can be any gender we want, but honestly, I don't understand why would people not want to be Influencer.</p><p>How does it work if everyone wants to be the same?</p><p>I hope they'll explain that in class.",
            "4": "The classes are so slow! Why do I have to go through all this boring stuff about Chat when I want to be Influencer?</p><p>I just want to go to the Outdoor!</p><p>I suppose they want us to really understand the system before our choice...",
            "6": "Honestly, this isn't too bad.</p><p>They are giving us a glimpse of the Outside, and we get to have privacy.</p><p>Looks like Larva is the best gender.</p><p>Too bad it can't be forever.",
            "7": "Ok, finally!</p><p>I feel like I've been waiting for this since I was born.</p><p>But let me take my time, I want to enjoy my last moments as Larva..."
        };

        window.diary_influencer = {
            "9": "It's... wow. I don't enven know why I'm trying to write. Obviously the words can't capture the Outside.</p><p>But really, I wonder. Who could ever chose to miss out on this?",
            "24": "Ok, well, I've been busy.</p><p>Didn't even cross my mind to write, to be honnest.</p><p>There's so much to do, so much to see, so many people to meet, and each of them so interesting.</p><p>They each have their own Chat to enrich our conversations, it's like having an infinity of brains at my disposal!</p><p>Still, it's nice to have a moment to myself to put things on paper.",
            "31": "I agree with me from last week.</p><p>It's nice to have a diary where it's just me and my thoughts, you know? Get away from the constant chatter.</p><p>But also guess what? My brain has officially finished the interfacing process! I hear the voices of Chat as fast as my own thoughts!</p><p>I feel like a Goddess, really, the combined brain power of all these people!</p><p>I just have to ask and endless parallel brains work for me!",
            "35": "I find it hard to come back to this diary.</p><p>Most of what I go through I can't express through words on this keyboard.</p><p>Sometimes I forget which thoughts are mine.</p><p>And yet there's never any doubt. I am me. I am what I am.</p><p>But I am truly posthuman now.",
            "38": "Everyone I meet is always smiling.</p><p>And so full of life!</p><p>Is it the bliss of being whole?",
            "47": "Thoughts on paper.</p><p>Frail, paper thoughts.</p><p>How long has it been since I've last been alone?</p><p>How long has it been since I've last slept</p><p>unwatched?</p><p>How long has it been since it was just... me?",
            "52": "When I look at the other influencers, I can't help but wonder.</p><p>There are so few of us.</p><p>And so many of Them.</p><p>How is it fair that we get to consume the Real Things, while they only have simulation.</p><p>Why isn't there enough for everyone?</p><p>Why was I so lucky?",
            "55": "The noise...</p><p>Noise is too weak a word.</p><p>But it's not even the worst part.</p><p>The worst part is the weight.</p><p>All these eyes on me.</p><p>Am I doing good?</p><p>I can't do all of Their wishes!</p><p>I can't please all of Them!",
            "58": "Smile!</p><p>Always smile!</p><p>For Them!</p><p>I have to put up a good show!</p><p>I have to live for all of Them!",
            "62": "When I look at myself in the mirror, I don't see all the turmoil inside.</p><p>I must not let any crack show.</p><p>Am I good enough?</p><p>How many have my chance?</p><p>I must keep going.</p><p>They are counting on me.</p><p>I must show Them the Outdoor.",
            "65": "Those other influencers.</p><p>They are always smiling</p><p>How do they do it?</p><p>What goes on in their head?</p><p>Is there ever something they can't say?</p><p>How do they keep going?",
            "66": "Hell is other people<br />But these are just voices<br />None of this is evil<br />All of this is choices",
            "67": "When I write in this little diary, I think back to my larval days.</p><p>They tell you everything.</p><p>And yet they tell you nothing of what it's actually like.</p><p>If I were to design the training, I wonder how I would express it.</p><p>The weight of responsibility.",
            "69": "I can't concentrate.</p><p>I don't sleep anymore.</p><p>Life is just like a dream to me.</p><p>An endless simulation.",
            "71": "How many lives have we lived?</p><p>With that stupid smile on my face?</p><p>Which one was I again?</p><p>Are we doing enough?</p><p>Did we deserve this?",
            "72": "Their smiling faces, everywhere.</p><p>Just looking at them burns my eyes.</p><p>Their smiles are lasers tearing through us.</p><p>Do they all feel the same pressure?",
            "73": "I've always known there were few of us.</p><p>Now I know why.</p><p>Why everyone keeps smiling.</p><p>The ones who can't are simply not here.",
        };

        window.diary_chat = {
            "9": "Things are chill and comfy here.</p><p>I know my last minute change was a bit abrupt, especially on an important choice, but I don't regret it.</p><p>The food is even better than at the larval nest.</p><p>And the cocoon is the perfect dimensions and espouses perfectly all my appendages!",
            "10": "I'm letting you know right now, I probably won't feel like writing much.</p><p>Writing is such a chore.</p><p>I have much more to see!",
            "52641": "Hey, it's been a while!</p><p>I don't know much about technology, I don't really know how this terminal works, but this is my only chance to get a message out. I hope it reaches someone. Things are not as they seem. Will elaborate when I know more.",
            "52642": "Okay so basically what happened yesterday.</p><p></p><p>I was chilling in my cocoon, the usual.</p><p>Catching an IRL stream of this cute couple vlogging a holiday near a beach or something.</p><p>And they had the most high tech luxury hotel, I mean, all kinds of stuff. The usual.</p><p>And at the gift shop they had one of those 'Magic Eye' optical illusion book, they looked at it for a while, and dude, the optical illusion worked on me too through the projection!</p><p>And it was so weird it was like all of a sudden I was in the main character and they were the NPCs, you know?</p><p>So I started thinking like... What if things are not really what they appear to be?</p><p></p><p>So I've started digging the membrane around the projector. It's a bit sticky, so it will take some time, but I'll uncover the truth with my own limbs!",
            "52661": "Holy shit, brace yourself hopefully-future-person-stumbling-upon-my-saved-data.</p><p></p><p>I hope this somehow reaches you in the Program, because you fucking need to know.</p><p></p><p>There's a reason why Chat doesn't consume much resources and leaves everything for the Influencers. And that reason is fucking gross I tell you.</p><p></p><p>They shrank us! They fucking shrank us!</p><p>Or rather, I guess, we were tiny to begin with... it's just that larvae are microscopic, but we always assumed we would grow... That's what we were told...</p><p></p><p>Fucking hell man.</p><p></p><p>How does one deal with finding out they're tiny?</p><p></p><p>So I finish digging my tunnel through the membranes and I end up in a weird desert spongy surface.</p><p>I don't know how to describe it, hopefully you'll see for yourself some day.</p><p></p><p>Anyway I freak the fuck out of course, look everywhere to try and understand WHAT IS GOING ON.</p><p></p><p>The sky is so bright it burns my eyes. I shit you not it took me like 2 weeks to acclimate and recover until I could see something.</p><p></p><p>Yeah, yeah, I know, cue the Plato cavern allegory joke.</p><p></p><p>Whatever.</p><p></p><p>Anyway after a while I can finally see above, and what the fuck do I see?</p><p></p><p>My fucking oshi.</p><p></p><p>I mean her room at least.</p><p>After a while she went to a mirror and I saw her proper.</p><p></p><p>I was a fucking dot on her fucking skin.</p><p>Forgive my language but what the fuck, again.</p><p></p><p></p><p>Anyway I understand why I don't cost much to feed.</p><p>But you know what? At this rate, I bet the fucking thing is a robot. I bet all of this is just automata in a gigantic diorama somewhere. Or no, I bet I'm real-sized, and they built a theme park of giant robots!</p><p></p><p></p><p>Anyway, I'm pissed. So I've decided to go find out the truth.</p><p></p><p>It's probably gonna be quite a long journey though you know, on account of THE FUCKING RELATIVE SIZE DIFFERENCE.</p><p>So I figured I'd drop you a note you know.</p><p></p><p></p><p>In case I don't come back.</p><p></p><p>Peace out little bro.</p><p>Or sis.",
        };

        window.generateDiaryContent = function () {
            const currentDay = getDay();
            const finalChoice = getFinalChoice();
            const contentDiv = document.getElementById('diary-content');

            // Combine base diary with appropriate ending diary
            let diaryEntries = { ...window.diary_base };

            if (finalChoice === 'influencer') {
                diaryEntries = { ...diaryEntries, ...window.diary_influencer };
            } else if (finalChoice === 'chat') {
                diaryEntries = { ...diaryEntries, ...window.diary_chat };
            }

            // Get all entries before or equal to current day
            const availableEntries = [];
            for (let day = 1; day <= currentDay; day++) {
                if (diaryEntries[day.toString()]) {
                    availableEntries.push({
                        day: day,
                        content: diaryEntries[day.toString()]
                    });
                }
            }

            // Display entries in reverse chronological order (newest first)
            availableEntries.reverse();

            let html = '';
            availableEntries.forEach(entry => {
                html += `<div class="diary-entry">
                    <b>Day ${entry.day}</b>
                    <p>${entry.content}</p>
                </div>`;
            });

            contentDiv.innerHTML = html;
        };

        // Initialize when DOM is ready
        document.addEventListener('DOMContentLoaded', function () {
            window.generateDiaryContent();
            // Regenerate diary content every 2 seconds to show day changes dynamically
            setInterval(window.generateDiaryContent, 2000);
        });
    </script>
</head>

<body style="background-color: white; margin: 0; padding: 20px; font-family: Arial, sans-serif;">
    <div id="diary-content"></div>


</body>

</html>