<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Menu</title>
    <link rel="stylesheet" href="../resource/css/style.css">
    <script type="module">
        import { play_value_sfx } from '../resource/js/common.js';
        window.play_value_sfx = play_value_sfx;
    </script>
    <style>
        /* Menu-specific Windows 98 styling */
        .menu-container {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32"><rect width="32" height="32" fill="%23008080" /><circle cx="16" cy="16" r="8" fill="%2300ffff" opacity="0.1" /></svg>') repeat;
            font-family: "MS Sans Serif", Tahoma, sans-serif;
        }

        .menu-window {
            width: 400px;
            background-color: #c0c0c0;
            border: 2px outset #c0c0c0;
            box-shadow: 4px 4px 8px rgba(0, 0, 0, 0.3);
        }

        .menu-title-bar {
            background: linear-gradient(to right, #000080, #1084d0);
            color: white;
            padding: 2px 4px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-family: "MS Sans Serif", sans-serif;
            font-size: 12px;
            height: 20px;
            box-sizing: border-box;
        }

        .menu-title {
            flex-grow: 1;
            font-weight: bold;
        }

        .menu-content {
            background-color: white;
            border: 1px inset #c0c0c0;
            padding: 20px;
            text-align: center;
        }

        .menu-content h1 {
            font-family: "MS Sans Serif", sans-serif;
            font-size: 24px;
            color: #000080;
            margin-bottom: 30px;
            text-shadow: 1px 1px 0px #c0c0c0;
        }

        .menu-start-btn {
            display: inline-block;
            padding: 8px 16px;
            font-family: "MS Sans Serif", sans-serif;
            font-size: 14px;
            font-weight: bold;
            color: #000;
            background: #c0c0c0;
            border-top: 2px solid #ffffff;
            border-left: 2px solid #ffffff;
            border-right: 2px solid #404040;
            border-bottom: 2px solid #404040;
            cursor: pointer;
            margin-bottom: 20px;
            box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
        }

        .menu-start-btn:hover {
            background: #dfdfdf;
        }

        .menu-start-btn:active {
            border-top: 2px solid #404040;
            border-left: 2px solid #404040;
            border-right: 2px solid #ffffff;
            border-bottom: 2px solid #ffffff;
            padding: 9px 15px 7px 17px;
            box-shadow: 1px 1px 2px rgba(0, 0, 0, 0.2);
        }

        .menu-credit {
            font-family: "MS Sans Serif", sans-serif;
            font-size: 12px;
            color: #666;
            margin-top: 10px;
        }

        .menu-credit a {
            color: #0000ff;
            text-decoration: underline;
        }

        .menu-credit a:hover {
            color: #ff0000;
        }

        .menu-start-btn {
            margin: 20px;
        }

        /* Volume control Windows 98 styling */
        .menu-volume-control {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin-bottom: 2px;
            padding: 8px 12px;
            font-family: "MS Sans Serif", sans-serif;
            font-size: 12px;
        }

        .menu-volume-label {
            color: #000;
            font-weight: bold;
        }

        .menu-volume-slider {
            -webkit-appearance: none;
            appearance: none;
            width: 120px;
            height: 20px;
            background: #c0c0c0;
            border: 1px inset #c0c0c0;
            border-radius: 0;
            outline: none;
            cursor: pointer;
        }

        .menu-volume-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 16px;
            height: 18px;
            background: #c0c0c0;
            border: 1px outset #c0c0c0;
            cursor: pointer;
            border-radius: 0;
        }

        .menu-volume-slider::-webkit-slider-thumb:hover {
            background: #dfdfdf;
        }

        .menu-volume-slider::-webkit-slider-thumb:active {
            border: 1px inset #c0c0c0;
            background: #b0b0b0;
        }

        .menu-volume-slider::-moz-range-thumb {
            width: 16px;
            height: 18px;
            background: #c0c0c0;
            border: 1px outset #c0c0c0;
            cursor: pointer;
            border-radius: 0;
        }

        .menu-volume-slider::-moz-range-thumb:hover {
            background: #dfdfdf;
        }

        .menu-volume-slider::-moz-range-thumb:active {
            border: 1px inset #c0c0c0;
            background: #b0b0b0;
        }
    </style>
</head>

<body>
    <div class="menu-container">
        <div class="menu-window">
            <div class="menu-title-bar">
                <div class="menu-title">I Have No Eyes And I Must Stream</div>
            </div>
            <div class="menu-content">
                <h1>I Have No Eyes<br />And I Must Stream</h1>
                <div class="menu-credit">
                    &lt;30 minutes interactive<br />surrealist science fiction short story/management game
                </div>
                <a href="computer.html" class="menu-start-btn">Play</a>

                <div class="menu-volume-control">
                    <label for="volume-slider" class="menu-volume-label">Music:</label>
                    <input type="range" id="volume-slider" min="0" max="100" value="0" class="menu-volume-slider">
                </div>

                <div class="menu-volume-control">
                    <label for="sfx-slider" class="menu-volume-label"> SFX : </label>
                    <input type="range" id="sfx-slider" min="0" max="100" value="0" class="menu-volume-slider">
                </div>

                <div class="menu-credit">
                    By <a href="http://www.yo252yo.com" target="_blank">yo252yo</a> with
                    music by <a href="https://loyaltyfreakmusic.com/" target="_blank">Rrrrrose Azerty</a>
                    <br />
                    The events portrayed are entirely fictional.
                    <br />
                    Work In Progress - PROTOTYPE - Alpha 0.1
                </div>
                <div class="menu-credit">
                    <a href="#"
                        onclick="if(confirm('Are you sure you want to reset all data?')) { localStorage.clear(); window.location.reload(); }">Start
                        over - reset data</a>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Volume changing functions
        function changeMusicVolume(value) {
            const volume = value / 100;
            window.top.MUSIC_AUDIO.volume = volume;
            localStorage.setItem("music_volume", volume.toString());
        }

        function getMusicVolume() {
            return window.top.MUSIC_AUDIO.volume;
        }

        function changeSFXVolume(value) {
            const volume = value / 100;
            localStorage.setItem('sfx_volume', volume.toString());
            // Play test sound to verify volume
            window.play_value_sfx();
        }

        function getSFXVolume() {
            return parseFloat(localStorage.getItem('sfx_volume') || '0.7');
        }

        // Initialize volumes when page loads
        function initializeVolumes() {
            // Music volume control functionality
            const volumeSlider = document.getElementById('volume-slider');
            if (volumeSlider) {
                volumeSlider.addEventListener('input', function () {
                    changeMusicVolume(volumeSlider.value);
                });

                // Set initial music volume
                try {
                    volumeSlider.value = Math.floor(100 * getMusicVolume());
                } catch {
                    volumeSlider.value = 60; // fallback default
                }
            }

            // SFX volume control functionality
            const sfxSlider = document.getElementById('sfx-slider');
            if (sfxSlider) {
                sfxSlider.addEventListener('input', function () {
                    changeSFXVolume(sfxSlider.value);
                });

                // Set initial SFX volume
                sfxSlider.value = Math.floor(100 * getSFXVolume());
            }
        }

        // Start initialization
        initializeVolumes();
    </script>
</body>

</html>